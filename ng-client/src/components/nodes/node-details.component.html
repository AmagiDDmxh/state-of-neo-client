<div class="col-md-12 padding-10 no-margin">
    <h2 class="bold text-grey section-title">NODE</h2>
    <div class="col-md-8 row padding-10 no-margin panel-body" *ngIf="node">
        <div class="col-md-12 row no-margin">
            <div class="col-md-3 text-center">
                <img class="img img-responsive img-thumbnail" src="assets/icons/tsvg/flag-{{node.locale}}.svg" />
            </div>
            <div class="col-md-9 row no-margin padding-10 stat">
                <div class="col-md-12">
                    <h4 class="bold stat">Name : {{node.url}}</h4>
                    <h5 class="bold">Endpoint we are checking : {{node.successUrl}}</h5>
                </div>
                <div class="col-md-12">
                    <span *ngIf="node.blockCount">
                        <i class="fa fa-check-circle"></i> Online
                    </span>
                    <span *ngIf="!node.blockCount" class="text-danger">
                        <i class="fa fa-times-circle"></i> Currently Offline
                    </span>
                </div>
                <div class="col-md-12">
                    <span *ngIf="bestBlock && node.blockCount">
                        <i class="fas fa-cube"></i> Latest block : {{node.blockCount}}
                        <i class="fa fa-arrow-down text-warning" *ngIf="node.blockCount - bestBlock < 0"></i>
                        <i class="fas fa-check text-success" *ngIf="node.blockCount - bestBlock >= 0"></i>
                        <span *ngIf="node.blockCount - bestBlock < 0">({{node.blockCount - bestBlock}})</span>
                        <span *ngIf="node.blockCount - bestBlock >= 0"> Same as network best block</span>
                    </span>
                </div>
                <div class="col-md-12">
                    <span>
                        <i class="fas fa-code-branch"></i> Version : {{node.version}}
                    </span>
                </div>
                <div class="col-md-12">
                    <i class="fas fa-wallet {{(node.isWalletOpen ? 'text-success' : 'text-danger')}}"></i> Wallet
                    {{node.isWalletOpen ? 'Open' : 'Closed'}}
                </div>
                <div class="col-md-12" *ngIf="node.firstRuntime" title="{{node.firstRuntime | stampToDate | timeAgo}}">
                    <i class="fas fa-clock"></i> Tracked since {{node.firstRuntime}}
                </div>
                <div class="col-md-12" *ngIf="node.latestRuntime" title="{{node.latestRuntime | stampToDate | timeAgo}}">
                    <i class="fas fa-stamp"></i> Last checked {{node.latestRuntime}}
                </div>
                <div class="col-md-12">
                    <span>
                        <i class="fas fa-plug"></i> Peers : {{node.connected}}
                    </span>
                </div>
                <div class="col-md-12 no-margin padding-5 row custom-vcenter" *ngIf="node.blockCount">
                    <div class="col-md-4 col-sm-4 col-xs-4 text-center {{(node.rpcEnabled ? 'text-success' : 'text-danger')}}">
                        RPC
                        <br>
                        <i class="fas {{(node.rpcEnabled ? 'fa-check-circle' : 'fa-times-circle')}}"></i>
                    </div>
                    <div class="col-md-4 col-sm-4 col-xs-4 text-center {{(node.p2pEnabled ? 'text-success' : 'text-danger')}}">
                        P2P
                        <br>
                        <i class="fas {{(node.p2pEnabled ? 'fa-check-circle' : 'fa-times-circle')}}"></i>
                    </div>
                    <div class="col-md-4 col-sm-4 col-xs-4 text-right {{getClassForNodeLatency(node)}}">
                        {{node.latency}} <i class="fas fa-signal"></i>
                    </div>
                </div>
                <div class="col-md-12 no-margin padding-5">
                    <div class="col-12 padding-5 no-margin" *ngIf="node.trackedSeconds">
                        <app-percent-bar [title]="'Uptime %'" [total]="node.trackedSeconds" [current]="node.secondsOnline / 1000"></app-percent-bar>
                    </div>
                </div>
                <div class="col-md-12 no-margin padding-5 row">
                    <div class="row no-margin padding-10 col-md-6 col-sm-6 col-xs-12">
                        <app-date-bar-chart [endpoint]="'node/latencychart/' + node.id" [label]="'Average Latency'"></app-date-bar-chart>
                    </div>
                    <div class="row no-margin padding-10 col-md-6 col-sm-6 col-xs-12">
                        <app-date-bar-chart [endpoint]="'node/peerschart/' + node.id" [label]="'Average Peers Count'"></app-date-bar-chart>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4" *ngIf="node">
        <div class="panel panel-default">
            <header class="panel-heading">
                <h2 class="panel-title elipsis uppercase">
                    <i class="fas fa-handshake" style="margin-left: 15px; margin-right: 20px"></i> Transactions Mem
                    pool <span>{{node?.pendingTransactions ? node.pendingTransactions.length : 0}}</span>
                </h2>
            </header>
            <div class="panel-body padding-5 word-wraped" *ngIf="node?.pendingTransactions">
                <a routerLink="/transaction/{{tx}}/{{node.id}}" routerLinkActive="router-link-active" *ngFor="let tx of node.pendingTransactions | paginate: {itemsPerPage: 10, currentPage: p}">
                    <div class="col-md-12 padding-5" style="margin-bottom: 10px;">
                        {{tx}} <i class="fas fa-arrow-right pull-right"></i>
                    </div>
                </a>
                <div class="col-md-12 padding-10 no-margin text-center">
                    <pagination-controls (pageChange)="p = $event"></pagination-controls>
                </div>
            </div>
        </div>
    </div>
</div>